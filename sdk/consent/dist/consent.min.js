"use strict";var DataLensConsent=(()=>{var P=Object.defineProperty;var re=Object.getOwnPropertyDescriptor;var ie=Object.getOwnPropertyNames;var se=Object.prototype.hasOwnProperty;var le=(e,t)=>{for(var n in t)P(e,n,{get:t[n],enumerable:!0})},ae=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ie(t))!se.call(e,r)&&r!==n&&P(e,r,{get:()=>t[r],enumerable:!(o=re(t,r))||o.enumerable});return e};var de=e=>ae(P({},"__esModule",{value:!0}),e);var Me={};le(Me,{getConsent:()=>te,isPurposeGranted:()=>$e,revokeConsent:()=>Pe,showPreferences:()=>Ee});async function H(e,t){let n=await fetch(`${e}/api/public/consent/widget/config`,{method:"GET",headers:{"X-API-Key":t,Accept:"application/json"}});if(!n.ok)throw new Error(`[DataLens] Failed to load widget config: ${n.status}`);return n.json()}async function O(e,t,n){let o=await fetch(`${e}/api/public/consent/sessions`,{method:"POST",headers:{"X-API-Key":t,"Content-Type":"application/json"},body:JSON.stringify(n)});o.ok||console.error("[DataLens] Failed to submit consent:",o.status)}var ce="dl_consent_";function M(e){return`${ce}${e}`}function W(e,t,n,o){let r=new Date;r.setDate(r.getDate()+o);let i={widget_id:e,widget_version:t,decisions:n,timestamp:new Date().toISOString(),expires_at:r.toISOString()},b=JSON.stringify(i),a=M(e);try{localStorage.setItem(a,b)}catch(f){pe(a,b,o)}}function y(e){let t=M(e),n=null;try{n=localStorage.getItem(t)}catch(o){n=ue(t)}if(!n)return null;try{let o=JSON.parse(n);return new Date(o.expires_at)<new Date?(A(e),null):o}catch(o){return null}}function A(e){let t=M(e);try{localStorage.removeItem(t)}catch(n){}fe(t)}function pe(e,t,n){let o=new Date;o.setDate(o.getDate()+n),document.cookie=`${encodeURIComponent(e)}=${encodeURIComponent(t)};expires=${o.toUTCString()};path=/;SameSite=Lax`}function ue(e){let t=encodeURIComponent(e)+"=",n=document.cookie.split(";");for(let o of n){let r=o.trim();if(r.startsWith(t))return decodeURIComponent(r.substring(t.length))}return null}function fe(e){document.cookie=`${encodeURIComponent(e)}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;SameSite=Lax`}var ge={title:"We value your privacy",description:"We use cookies and similar technologies to improve your experience.",accept_all:"Accept All",reject_all:"Reject All",customize:"Customize",save_preferences:"Save Preferences",essential_label:"Essential (Always Active)",powered_by:"Powered by DataLens",close:"Close",preferences_title:"Privacy Preferences",preferences_description:"Choose which categories of data processing you consent to."},x="en",C={};function q(e){C=e.translations||{};let t=me(),n=e.languages||["en"];if(n.includes(t))x=t;else{let o=t.split("-")[0];n.includes(o)?x=o:x=e.default_language||"en"}}function d(e){var t,n;return(t=C[x])!=null&&t[e]?C[x][e]:(n=C.en)!=null&&n[e]?C.en[e]:ge[e]||e}function N(){return["ar","ur","ks","sd","he","fa"].includes(x)}function me(){return typeof navigator!="undefined"&&(navigator.language||navigator.userLanguage)||"en"}function K(e,t){let n=N()?"rtl":"ltr",o=e.border_radius||"8px";return`
:host {
  all: initial;
  font-family: ${e.font_family||"'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif"};
  color: ${e.text_color||"#1a1a2e"};
  direction: ${n};
  --dl-primary: ${e.primary_color||"#6C5CE7"};
  --dl-primary-hover: ${be(e.primary_color||"#6C5CE7",-15)};
  --dl-bg: ${e.background_color||"#ffffff"};
  --dl-text: ${e.text_color||"#1a1a2e"};
  --dl-text-secondary: ${I(e.text_color||"#1a1a2e",.65)};
  --dl-border: ${I(e.text_color||"#1a1a2e",.1)};
  --dl-radius: ${o};
  --dl-shadow: 0 8px 32px rgba(0,0,0,0.12), 0 2px 8px rgba(0,0,0,0.08);
  --dl-transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ---- Backdrop ---- */
.dl-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(2px);
  z-index: 2147483646;
  opacity: 0;
  transition: opacity var(--dl-transition);
  pointer-events: none;
}
.dl-backdrop.dl-visible {
  opacity: 1;
  pointer-events: auto;
}

/* ---- Banner Container ---- */
.dl-banner {
  position: fixed;
  left: 0; right: 0;
  z-index: 2147483647;
  background: var(--dl-bg);
  box-shadow: var(--dl-shadow);
  padding: 20px 28px;
  display: flex;
  align-items: center;
  gap: 20px;
  transform: translateY(100%);
  transition: transform var(--dl-transition);
  border-top: 3px solid var(--dl-primary);
}
.dl-banner.dl-bottom { bottom: 0; }
.dl-banner.dl-top {
  top: 0; bottom: auto;
  transform: translateY(-100%);
  border-top: none;
  border-bottom: 3px solid var(--dl-primary);
}
.dl-banner.dl-visible {
  transform: translateY(0);
}

/* Banner as Modal */
.dl-banner.dl-modal {
  position: fixed;
  top: 50%; left: 50%;
  right: auto; bottom: auto;
  transform: translate(-50%, -50%) scale(0.9);
  opacity: 0;
  max-width: 520px;
  width: 90vw;
  border-radius: var(--dl-radius);
  border-top: 3px solid var(--dl-primary);
  flex-direction: column;
  padding: 28px;
}
.dl-banner.dl-modal.dl-visible {
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
}

/* ---- Banner Content ---- */
.dl-banner-body {
  flex: 1;
  min-width: 0;
}
.dl-banner-title {
  font-size: 16px;
  font-weight: 700;
  margin: 0 0 6px;
  color: var(--dl-text);
}
.dl-banner-desc {
  font-size: 13px;
  line-height: 1.5;
  margin: 0;
  color: var(--dl-text-secondary);
}

/* ---- Logo ---- */
.dl-logo {
  height: 28px;
  width: auto;
  flex-shrink: 0;
}

/* ---- Button Group ---- */
.dl-btn-group {
  display: flex;
  gap: 10px;
  flex-shrink: 0;
  flex-wrap: wrap;
}
.dl-modal .dl-btn-group {
  width: 100%;
  justify-content: flex-end;
  margin-top: 8px;
}

/* ---- Buttons ---- */
.dl-btn {
  padding: 10px 22px;
  border-radius: var(--dl-radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  white-space: nowrap;
  line-height: 1;
  letter-spacing: 0.01em;
}
.dl-btn:focus-visible {
  outline: 2px solid var(--dl-primary);
  outline-offset: 2px;
}
.dl-btn-primary {
  background: var(--dl-primary);
  color: #fff;
}
.dl-btn-primary:hover {
  background: var(--dl-primary-hover);
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}
.dl-btn-secondary {
  background: transparent;
  color: var(--dl-text);
  border: 1.5px solid var(--dl-border);
}
.dl-btn-secondary:hover {
  border-color: var(--dl-primary);
  color: var(--dl-primary);
}
.dl-btn-text {
  background: transparent;
  color: var(--dl-primary);
  padding: 10px 14px;
}
.dl-btn-text:hover {
  text-decoration: underline;
}

/* ---- Preference Center (Modal / Sidebar) ---- */
.dl-pref {
  position: fixed;
  z-index: 2147483647;
  background: var(--dl-bg);
  box-shadow: var(--dl-shadow);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: all var(--dl-transition);
}

/* Modal layout */
.dl-pref.dl-pref-modal {
  top: 50%; left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  opacity: 0;
  pointer-events: none;
  max-width: 560px;
  width: 92vw;
  max-height: 85vh;
  border-radius: var(--dl-radius);
  border-top: 3px solid var(--dl-primary);
}
.dl-pref.dl-pref-modal.dl-visible {
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
  pointer-events: auto;
}

/* Sidebar layout */
.dl-pref.dl-pref-sidebar {
  top: 0; bottom: 0;
  right: ${n==="rtl"?"auto":"0"};
  left: ${n==="rtl"?"0":"auto"};
  width: 420px;
  max-width: 100vw;
  transform: translateX(${n==="rtl"?"-100%":"100%"});
  border-radius: 0;
}
.dl-pref.dl-pref-sidebar.dl-visible {
  transform: translateX(0);
}

/* Preference Header */
.dl-pref-header {
  padding: 24px 24px 16px;
  border-bottom: 1px solid var(--dl-border);
}
.dl-pref-title {
  font-size: 18px;
  font-weight: 700;
  margin: 0 0 6px;
  color: var(--dl-text);
}
.dl-pref-desc {
  font-size: 13px;
  color: var(--dl-text-secondary);
  margin: 0;
  line-height: 1.5;
}
.dl-pref-close {
  position: absolute;
  top: 16px;
  ${n==="rtl"?"left":"right"}: 16px;
  width: 32px; height: 32px;
  border: none;
  background: transparent;
  cursor: pointer;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--dl-text-secondary);
  font-size: 18px;
  transition: background 0.2s;
}
.dl-pref-close:hover {
  background: var(--dl-border);
}

/* Purpose List */
.dl-pref-body {
  flex: 1;
  overflow-y: auto;
  padding: 16px 24px;
}
.dl-purpose {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 14px 0;
  border-bottom: 1px solid var(--dl-border);
  gap: 16px;
}
.dl-purpose:last-child { border-bottom: none; }
.dl-purpose-info { flex: 1; min-width: 0; }
.dl-purpose-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--dl-text);
  margin: 0 0 3px;
}
.dl-purpose-desc {
  font-size: 12px;
  color: var(--dl-text-secondary);
  margin: 0;
  line-height: 1.4;
}
.dl-purpose-essential {
  font-size: 11px;
  color: var(--dl-primary);
  font-weight: 600;
  margin-top: 2px;
}

/* Toggle Switch */
.dl-toggle {
  position: relative;
  width: 44px; height: 24px;
  flex-shrink: 0;
  margin-top: 2px;
}
.dl-toggle input {
  opacity: 0;
  width: 0; height: 0;
  position: absolute;
}
.dl-toggle-track {
  position: absolute;
  inset: 0;
  background: var(--dl-border);
  border-radius: 12px;
  cursor: pointer;
  transition: background 0.25s;
}
.dl-toggle-track::after {
  content: '';
  position: absolute;
  top: 2px;
  ${n==="rtl"?"right":"left"}: 2px;
  width: 20px; height: 20px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  transition: transform 0.25s;
}
.dl-toggle input:checked + .dl-toggle-track {
  background: var(--dl-primary);
}
.dl-toggle input:checked + .dl-toggle-track::after {
  transform: translateX(${n==="rtl"?"-20px":"20px"});
}
.dl-toggle input:disabled + .dl-toggle-track {
  opacity: 0.5;
  cursor: default;
}

/* Preference Footer */
.dl-pref-footer {
  padding: 16px 24px;
  border-top: 1px solid var(--dl-border);
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

/* ---- Revisit Button (FAB) ---- */
.dl-revisit {
  position: fixed;
  z-index: 2147483645;
  width: 44px; height: 44px;
  border-radius: 50%;
  background: var(--dl-primary);
  color: #fff;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.25s;
  opacity: 0;
  transform: scale(0.7);
  pointer-events: none;
}
.dl-revisit.dl-visible {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}
.dl-revisit:hover {
  transform: scale(1.08);
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}
.dl-revisit.dl-bottom-left { bottom: 20px; ${n==="rtl"?"right":"left"}: 20px; }
.dl-revisit.dl-bottom-right { bottom: 20px; ${n==="rtl"?"left":"right"}: 20px; }

/* ---- Responsive ---- */
@media (max-width: 640px) {
  .dl-banner {
    flex-direction: column;
    padding: 16px 20px;
    gap: 14px;
  }
  .dl-btn-group {
    width: 100%;
    justify-content: stretch;
  }
  .dl-btn-group .dl-btn {
    flex: 1;
    text-align: center;
  }
  .dl-pref.dl-pref-sidebar {
    width: 100vw;
  }
  .dl-pref.dl-pref-modal {
    width: 95vw;
    max-height: 90vh;
  }
}

/* ---- Animations ---- */
@keyframes dl-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

${t||""}
`.trim()}function be(e,t){let n=parseInt(e.replace("#",""),16),o=Math.min(255,Math.max(0,(n>>16&255)+Math.round(2.55*t))),r=Math.min(255,Math.max(0,(n>>8&255)+Math.round(2.55*t))),i=Math.min(255,Math.max(0,(n&255)+Math.round(2.55*t)));return`#${(o<<16|r<<8|i).toString(16).padStart(6,"0")}`}function I(e,t){let n=parseInt(e.replace("#",""),16),o=n>>16&255,r=n>>8&255,i=n&255;return`rgba(${o},${r},${i},${t})`}function F(e,t){let n=e.layout||"BOTTOM_BAR",o=document.createElement("div");o.className="dl-banner",n==="MODAL"?o.classList.add("dl-modal"):n==="TOP_BAR"?o.classList.add("dl-top"):o.classList.add("dl-bottom");let r="";return e.theme.logo_url&&(r=`<img class="dl-logo" src="${he(e.theme.logo_url)}" alt="Logo" />`),o.innerHTML=`
    ${r}
    <div class="dl-banner-body">
      <p class="dl-banner-title">${S(d("title"))}</p>
      <p class="dl-banner-desc">${S(d("description"))}</p>
    </div>
    <div class="dl-btn-group">
      <button class="dl-btn dl-btn-secondary dl-btn-reject">${S(d("reject_all"))}</button>
      <button class="dl-btn dl-btn-text dl-btn-customize">${S(d("customize"))}</button>
      <button class="dl-btn dl-btn-primary dl-btn-accept">${S(d("accept_all"))}</button>
    </div>
  `,o.querySelector(".dl-btn-accept").addEventListener("click",t.onAcceptAll),o.querySelector(".dl-btn-reject").addEventListener("click",t.onRejectAll),o.querySelector(".dl-btn-customize").addEventListener("click",t.onCustomize),{element:o,show:()=>{o.offsetHeight,o.classList.add("dl-visible")},hide:()=>{o.classList.remove("dl-visible")}}}function T(e){let t=document.createElement("div");return t.className="dl-backdrop",e&&t.addEventListener("click",e),{element:t,show:()=>t.classList.add("dl-visible"),hide:()=>t.classList.remove("dl-visible")}}function S(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}function he(e){return e.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function X(e,t,n,o){let r=e.layout==="SIDEBAR"?"SIDEBAR":"MODAL",i=document.createElement("div");i.className=`dl-pref dl-pref-${r.toLowerCase()}`;let b=t.map((a,f)=>{var j,z;let h=a.is_essential,ne=h?!0:n?(z=(j=n.find(oe=>oe.purpose_id===a.id))==null?void 0:j.granted)!=null?z:!1:e.default_state==="OPT_IN";return`
      <div class="dl-purpose">
        <div class="dl-purpose-info">
          <p class="dl-purpose-name">${m(a.name)}</p>
          <p class="dl-purpose-desc">${m(a.description)}</p>
          ${h?`<p class="dl-purpose-essential">${m(d("essential_label"))}</p>`:""}
        </div>
        <label class="dl-toggle">
          <input type="checkbox"
                 data-purpose-id="${G(a.id)}"
                 ${ne?"checked":""}
                 ${h?"disabled":""} />
          <span class="dl-toggle-track"></span>
        </label>
      </div>
    `}).join("");return i.innerHTML=`
    <div class="dl-pref-header" style="position:relative;">
      <p class="dl-pref-title">${m(d("preferences_title"))}</p>
      <p class="dl-pref-desc">${m(d("preferences_description"))}</p>
      <button class="dl-pref-close" aria-label="${G(d("close"))}">&times;</button>
    </div>
    <div class="dl-pref-body">
      ${b}
    </div>
    <div class="dl-pref-footer">
      <button class="dl-btn dl-btn-secondary dl-btn-reject-all">${m(d("reject_all"))}</button>
      <button class="dl-btn dl-btn-primary dl-btn-accept-all">${m(d("accept_all"))}</button>
      <button class="dl-btn dl-btn-primary dl-btn-save">${m(d("save_preferences"))}</button>
    </div>
  `,i.querySelector(".dl-pref-close").addEventListener("click",o.onClose),i.querySelector(".dl-btn-accept-all").addEventListener("click",()=>{i.querySelectorAll("input[data-purpose-id]").forEach(f=>{f.disabled||(f.checked=!0)})}),i.querySelector(".dl-btn-reject-all").addEventListener("click",()=>{i.querySelectorAll("input[data-purpose-id]").forEach(f=>{f.disabled||(f.checked=!1)})}),i.querySelector(".dl-btn-save").addEventListener("click",()=>{let a=i.querySelectorAll("input[data-purpose-id]"),f=[];a.forEach(h=>{f.push({purpose_id:h.dataset.purposeId,granted:h.checked})}),o.onSave(f)}),{element:i,show:()=>{i.offsetHeight,i.classList.add("dl-visible")},hide:()=>{i.classList.remove("dl-visible")}}}function m(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}function G(e){return e.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function J(e,t){let n=document.createElement("button");return n.className=`dl-revisit dl-${e}`,n.setAttribute("aria-label","Manage consent preferences"),n.innerHTML=xe,n.addEventListener("click",t),{element:n,show:()=>{n.offsetHeight,n.classList.add("dl-visible")},hide:()=>{n.classList.remove("dl-visible")}}}var xe='<svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><circle cx="12" cy="12" r="1.5" fill="currentColor"/><circle cx="9" cy="9" r="1" fill="currentColor"/><circle cx="15" cy="10" r="1" fill="currentColor"/></svg>';var w=null,k=[],v=new Set,L=[];function Y(e,t){L=e||[],v=new Set(t.filter(n=>n.is_essential).map(n=>n.id)),ve(),Ce()}function V(e){let t=new Set(e.filter(o=>o.granted).map(o=>o.purpose_id));v.forEach(o=>t.add(o)),k.filter(o=>t.has(o.purposeId)).forEach(o=>{ye(o);let r=k.indexOf(o);r>=0&&k.splice(r,1)})}function Q(){w&&(w.disconnect(),w=null),k.length=0}function ve(){document.querySelectorAll("script[data-consent-purpose]").forEach(t=>{let n=t.getAttribute("data-consent-purpose");n&&(v.has(n)||$(t,n))}),L.length>0&&document.querySelectorAll("script[src]").forEach(n=>{if(n.hasAttribute("data-consent-purpose")||n.hasAttribute("data-dl-blocked"))return;let o=n.getAttribute("src")||"",r=L.find(i=>o.includes(i.pattern));r&&!v.has(r.purpose_id)&&$(n,r.purpose_id)})}function $(e,t){let n={original:e,purposeId:t,src:e.src||e.getAttribute("data-src")||void 0,inline:e.src?void 0:e.textContent||void 0};k.push(n),e.type="text/plain",e.setAttribute("data-dl-blocked","true"),e.src&&(e.setAttribute("data-src",e.src),e.removeAttribute("src"))}function ye(e){let t=document.createElement("script");e.src?t.src=e.src:e.inline&&(t.textContent=e.inline),t.type="text/javascript",t.setAttribute("data-consent-purpose",e.purposeId),t.setAttribute("data-dl-released","true"),e.original.parentNode?e.original.parentNode.replaceChild(t,e.original):document.head.appendChild(t)}function Ce(){typeof MutationObserver!="undefined"&&(w=new MutationObserver(e=>{for(let t of e)for(let n of Array.from(t.addedNodes))n instanceof HTMLScriptElement&&Se(n)}),w.observe(document.documentElement,{childList:!0,subtree:!0}))}function Se(e){if(e.hasAttribute("data-dl-released")||e.hasAttribute("data-dl-blocked"))return;let t=e.getAttribute("data-consent-purpose");if(t&&!v.has(t)){$(e,t);return}let n=e.src||"";if(n&&L.length>0){let o=L.find(r=>n.includes(r.pattern));o&&!v.has(o.purpose_id)&&$(e,o.purpose_id)}}var s=null,E=null,g=null,_=null,p=null,l=null,c=null,u=null;async function Z(e){E=e;try{s=await H(e.apiUrl,e.apiKey);let t=s.config,n=t.purposes||[];q(t),t.block_until_consent&&Y(t.blocked_script_patterns||[],n),we(t);let o=y(s.id);o&&o.widget_version===s.version?(ee(o.decisions,t,n),U(t)):(o&&A(s.id),ke(t,n))}catch(t){console.error("[DataLens] SDK initialization failed:",t)}}function we(e){_=document.createElement("div"),_.id="datalens-consent",_.style.cssText="position:fixed;z-index:2147483645;pointer-events:none;",document.body.appendChild(_),g=_.attachShadow({mode:"open"});let t=document.createElement("style");t.textContent=K(e.theme,e.custom_css||void 0),g.appendChild(t)}function ke(e,t){if(!g)return;let n=e.layout==="MODAL";n&&(l=T(),g.appendChild(l.element)),p=F(e,{onAcceptAll:()=>Le(e,t),onRejectAll:()=>_e(e,t),onCustomize:()=>B(e,t)}),g.appendChild(p.element),requestAnimationFrame(()=>{p==null||p.show(),n&&(l==null||l.show())})}function B(e,t){if(!g)return;p==null||p.hide(),l||(l=T(()=>D()),g.appendChild(l.element)),l.show();let n=s?y(s.id):null;c=X(e,t,(n==null?void 0:n.decisions)||null,{onSave:o=>Ae(o,e,t),onClose:()=>D()}),g.appendChild(c.element),requestAnimationFrame(()=>c==null?void 0:c.show())}function D(){c==null||c.hide(),l==null||l.hide(),setTimeout(()=>{c!=null&&c.element.parentNode&&c.element.parentNode.removeChild(c.element),c=null,(s?y(s.id):null)||p==null||p.show()},350)}function U(e){g&&(u=J("bottom-left",()=>{u==null||u.hide(),B(e,e.purposes||[])}),g.appendChild(u.element),requestAnimationFrame(()=>u==null?void 0:u.show()))}function Le(e,t){let n=t.map(o=>({purpose_id:o.id,granted:!0}));R(n,e,t)}function _e(e,t){let n=t.map(o=>({purpose_id:o.id,granted:o.is_essential}));R(n,e,t)}function Ae(e,t,n){D(),R(e,t,n)}function R(e,t,n){!s||!E||(W(s.id,s.version,e,t.consent_expiry_days||365),O(E.apiUrl,E.apiKey,{widget_id:s.id,widget_version:s.version,decisions:e,user_agent:navigator.userAgent,page_url:window.location.href}).catch(o=>console.error("[DataLens] Submit failed:",o)),ee(e,t,n),p==null||p.hide(),l==null||l.hide(),U(t),window.dispatchEvent(new CustomEvent("datalens:consent",{detail:{decisions:e}})))}function ee(e,t,n){t.block_until_consent&&V(e)}function te(){if(!s)return null;let e=y(s.id);return(e==null?void 0:e.decisions)||null}function $e(e){var n,o;let t=te();return t&&(o=(n=t.find(r=>r.purpose_id===e))==null?void 0:n.granted)!=null?o:!1}function Ee(){s&&(u==null||u.hide(),B(s.config,s.config.purposes||[]))}function Pe(){s&&(A(s.id),Q(),window.location.reload())}(function(){let t=document.querySelectorAll("script[data-widget-id]"),n=t[t.length-1];if(!n){console.error("[DataLens] Missing data-widget-id attribute on script tag");return}let o=n.getAttribute("data-widget-id"),r=n.getAttribute("data-api-key")||"",i=n.getAttribute("data-api-url")||"";if(!i){let b=n.getAttribute("src")||"";if(b)try{i=new URL(b).origin}catch(a){i=window.location.origin}else i=window.location.origin}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>Z({widgetId:o,apiKey:r,apiUrl:i})):Z({widgetId:o,apiKey:r,apiUrl:i})})();return de(Me);})();
